INCLUDE_DIRECTORIES(. gui
#        ${CMAKE_BINARY_DIR}/plugins/PrintSky/src
)
LINK_DIRECTORIES(${CMAKE_BINARY_DIR}/src)

SET(PrintSky_SRCS
  PrintSky.hpp
  PrintSky.cpp
  gui/PrintSkyDialog.hpp
  gui/PrintSkyDialog.cpp
  gui/StelDialogPrintSky.hpp
  gui/StelDialogPrintSky.cpp
  )

################# compiles resources files ############
#SET(PrintSky_RES ../PrintSky.qrc)

################# compiles .ui files ############
SET(PrintSky_UIS
  gui/printskyDialog.ui
)
IF (${QT_VERSION_MAJOR} EQUAL "5")
     QT5_WRAP_UI(PrintSky_UIS_H ${PrintSky_UIS})
#     QT5_ADD_RESOURCES(PrintSky_RES_CXX ${PrintSky_RES})
ELSE()
     QT_WRAP_UI(PrintSky_UIS_H ${PrintSky_UIS})
#     QT_ADD_RESOURCES(PrintSky_RES_CXX ${PrintSky_RES})
ENDIF()

## Add here all the files which require moc compilation
## that is, all the headers with SIGNAL/SLOTS/PLUGIN_INTERFACE etc..
#SET(PrintSky_MOC_HDRS
# PrintSky.hpp
# gui/PrintSkyDialog.hpp
# gui/StelDialogPrintSky.hpp
# )

## After this call, PrintSky_MOC_SRCS = moc_PrintSky.cxx
#QT5_WRAP_CPP(PrintSky_MOC_SRCS ${PrintSky_MOC_HDRS})

#SET(extLinkerOption ${QT_LIBRARIES} ${FreeType2_LIBRARIES} ${JPEG_LIBRARIES} ${PNG_LIBRARIES} ${OPENGL_LIBRARIES} ${ICONV_LIBRARIES} ${INTL_LIBRARIES})
SET(extLinkerOption ${FreeType2_LIBRARIES} ${JPEG_LIBRARIES} ${PNG_LIBRARIES} ${OPENGL_LIBRARIES} ${ICONV_LIBRARIES} ${INTL_LIBRARIES})

################ For building the dynamic library ######################
#IF(BUILD_DYNAMIC_PLUGINS)
#        ADD_LIBRARY(PrintSky MODULE ${PrintSky_SRCS} ${PrintSky_MOC_SRCS} ${PrintSky_UIS_H})
#	IF(APPLE)
#		FIND_LIBRARY(OPENGL_LIBRARY OpenGL)
#		MARK_AS_ADVANCED(OPENGL_LIBRARY)
#		SET_TARGET_PROPERTIES(PrintSky PROPERTIES LINK_FLAGS "-undefined dynamic_lookup" SUFFIX ".dylib")
#	ENDIF(APPLE)
#
#	IF(WIN32)
#		SET_TARGET_PROPERTIES(PrintSky PROPERTIES LINK_FLAGS "-enable-runtime-pseudo-reloc -Wl,--allow-multiple-definition" )
#		SET(StelMain stelMain)
#	ELSE(WIN32)
#		SET(StelMain )
#	ENDIF(WIN32)
#
#	TARGET_LINK_LIBRARIES(PrintSky ${StelMain} ${extLinkerOption})
#	INSTALL(TARGETS PrintSky DESTINATION "modules/${PACKAGE}")
#ENDIF()
#
############### For building the static library ######################
FIND_PACKAGE(Qt${QT_VERSION_MAJOR} COMPONENTS PrintSupport)

#IF(BUILD_STATIC_PLUGINS)
#        ADD_LIBRARY(PrintSky-static STATIC ${PrintSky_SRCS} ${PrintSky_MOC_SRCS} ${PrintSky_UIS_H})
        ADD_LIBRARY(PrintSky-static STATIC ${PrintSky_SRCS} ${PrintSky_RES_CXX} ${PrintSky_UIS_H})
        TARGET_LINK_LIBRARIES(PrintSky-static Qt${QT_VERSION_MAJOR}::Core Qt${QT_VERSION_MAJOR}::Widgets Qt${QT_VERSION_MAJOR}::PrintSupport ${extLinkerOption})
        # The library target "PrintSky-static" has a default OUTPUT_NAME of "PrintSky-static", so change it.
        SET_TARGET_PROPERTIES(PrintSky-static PROPERTIES OUTPUT_NAME "PrintSky")
#	SET_TARGET_PROPERTIES(PrintSky-static PROPERTIES COMPILE_FLAGS "-fPIC -DQT_STATICPLUGIN")
        SET_TARGET_PROPERTIES(PrintSky-static PROPERTIES COMPILE_FLAGS "-DQT_STATICPLUGIN")
        ADD_DEPENDENCIES(AllStaticPlugins PrintSky-static)
#ENDIF()

SET_TARGET_PROPERTIES(PrintSky-static PROPERTIES FOLDER "plugins/PrintSky")

